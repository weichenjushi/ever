技术002KNToolsIperf

iperf 命令是一个网络性能测试工具。iperf 可以测试 TCP 和 UDP
带宽质量。iperf 可以测量最大 TCP 带宽，具有多种参数和 UDP 特性。iperf
可以报告带宽，延迟抖动和数据包丢失。利用 iperf
这一特性，可以用来测试一些网络设备如路由器，防火墙，交换机等的性能。

iperf 使用简单的 C/S 架构，客户端使用 -c， 服务端使用 -s。
iperf和iperf3常用命令如下 服务端常用命令： iperf/iperf3 -s
启动服务端，默认协议tcp，默认端口5001 iperf -s -w 32M -D / iperf3 -s -D
以守护进程启动服务端，tcp窗口大小为32M iperf -i1 -u -s -p 5003 / iperf3
-s -p 5003 启动udp协议服务端，监听端口5003 客户端常用命令： iperf/iperf3
-c serverIP -i 1 -t 30 压测30s，每1s输出一次 iperff/iperf3 -c serverIP
-i 1 -t 20 -r 逆向执行，从服务端到本地 iperf/iperf3 -c serverIP -i 1 -t
20 -w 32M -P 4 4个并发，窗口大小进程压测 iperf/iperf3 -c serverIP -u -i
1 -b 200M 测试 200M UDP协议 iperf3还支持其他特性。 iperf3 -c
10.103.17.184 -i.5 -O 2 忽略掉前2s的数据包，该命令用于支持TCP的慢启动
iperf3 -Z -c 10.103.17.184 通过系统调用sendfile()
实现“零拷贝”效果。消耗较少CPU。 iperf3 -c 10.103.17.184 -T s1 & iperf3
-c 10.103.17.184 -T s2 通知执行测试s1，s2并进行比较。 iperf3 -c
10.103.17.184 -J 以json的格式输出数据 iperf3 -A 4,4 -c 10.103.17.184
设置发送者和接受者的CPU的核数（从0开始）

iperf3 -c 10.103.17.184 -A2,2 -T “1” & ; iperf3 -c 10.103.17.184 -p 5202
-A3,3 -T “2” & 在CPU核“1”和核“2”进行两个测试

iperf%20%E5%91%BD%E4%BB%A4%E6%98%AF%E4%B8%80%E4%B8%AA%E7%BD%91%E7%BB%9C%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7%E3%80%82iperf%20%E5%8F%AF%E4%BB%A5%E6%B5%8B%E8%AF%95%20TCP%20%E5%92%8C%20UDP%20%E5%B8%A6%E5%AE%BD%E8%B4%A8%E9%87%8F%E3%80%82iperf%20%E5%8F%AF%E4%BB%A5%E6%B5%8B%E9%87%8F%E6%9C%80%E5%A4%A7%20TCP%20%E5%B8%A6%E5%AE%BD%EF%BC%8C%E5%85%B7%E6%9C%89%E5%A4%9A%E7%A7%8D%E5%8F%82%E6%95%B0%E5%92%8C%20UDP%20%E7%89%B9%E6%80%A7%E3%80%82iperf%20%E5%8F%AF%E4%BB%A5%E6%8A%A5%E5%91%8A%E5%B8%A6%E5%AE%BD%EF%BC%8C%E5%BB%B6%E8%BF%9F%E6%8A%96%E5%8A%A8%E5%92%8C%E6%95%B0%E6%8D%AE%E5%8C%85%E4%B8%A2%E5%A4%B1%E3%80%82%E5%88%A9%E7%94%A8%20iperf%20%E8%BF%99%E4%B8%80%E7%89%B9%E6%80%A7%EF%BC%8C%E5%8F%AF%E4%BB%A5%E7%94%A8%E6%9D%A5%E6%B5%8B%E8%AF%95%E4%B8%80%E4%BA%9B%E7%BD%91%E7%BB%9C%E8%AE%BE%E5%A4%87%E5%A6%82%E8%B7%AF%E7%94%B1%E5%99%A8%EF%BC%8C%E9%98%B2%E7%81%AB%E5%A2%99%EF%BC%8C%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%AD%89%E7%9A%84%E6%80%A7%E8%83%BD%E3%80%82%0A%0Aiperf%20%E4%BD%BF%E7%94%A8%E7%AE%80%E5%8D%95%E7%9A%84%20C%2FS%20%E6%9E%B6%E6%9E%84%EF%BC%8C%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%BD%BF%E7%94%A8%20-c%EF%BC%8C%20%E6%9C%8D%E5%8A%A1%E7%AB%AF%E4%BD%BF%E7%94%A8%20-s%E3%80%82%0A%0Aiperf%E5%92%8Ciperf3%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E5%A6%82%E4%B8%8B%0A%0A%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%EF%BC%9A%0A%0Aiperf%2Fiperf3%20-s%09%E5%90%AF%E5%8A%A8%E6%9C%8D%E5%8A%A1%E7%AB%AF%EF%BC%8C%E9%BB%98%E8%AE%A4%E5%8D%8F%E8%AE%AEtcp%EF%BC%8C%E9%BB%98%E8%AE%A4%E7%AB%AF%E5%8F%A35001%0Aiperf%20-s%20-w%2032M%20-D%20%2F%20iperf3%20-s%20-D%09%E4%BB%A5%E5%AE%88%E6%8A%A4%E8%BF%9B%E7%A8%8B%E5%90%AF%E5%8A%A8%E6%9C%8D%E5%8A%A1%E7%AB%AF%EF%BC%8Ctcp%E7%AA%97%E5%8F%A3%E5%A4%A7%E5%B0%8F%E4%B8%BA32M%0Aiperf%20-i1%20-u%20-s%20-p%205003%20%2F%20iperf3%20-s%20-p%205003%09%E5%90%AF%E5%8A%A8udp%E5%8D%8F%E8%AE%AE%E6%9C%8D%E5%8A%A1%E7%AB%AF%EF%BC%8C%E7%9B%91%E5%90%AC%E7%AB%AF%E5%8F%A35003%0A%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%EF%BC%9A%0A%0Aiperf%2Fiperf3%20-c%20serverIP%20-i%201%20-t%2030%09%E5%8E%8B%E6%B5%8B30s%EF%BC%8C%E6%AF%8F1s%E8%BE%93%E5%87%BA%E4%B8%80%E6%AC%A1%0Aiperff%2Fiperf3%20-c%20serverIP%20-i%201%20-t%2020%20-r%09%E9%80%86%E5%90%91%E6%89%A7%E8%A1%8C%EF%BC%8C%E4%BB%8E%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%88%B0%E6%9C%AC%E5%9C%B0%0Aiperf%2Fiperf3%20-c%20serverIP%20-i%201%20-t%2020%20-w%2032M%20-P%204%094%E4%B8%AA%E5%B9%B6%E5%8F%91%EF%BC%8C%E7%AA%97%E5%8F%A3%E5%A4%A7%E5%B0%8F%E8%BF%9B%E7%A8%8B%E5%8E%8B%E6%B5%8B%0Aiperf%2Fiperf3%20-c%20serverIP%20-u%20-i%201%20-b%20200M%20%09%E6%B5%8B%E8%AF%95%20200M%20UDP%E5%8D%8F%E8%AE%AE%0A%0A%0Aiperf3%E8%BF%98%E6%94%AF%E6%8C%81%E5%85%B6%E4%BB%96%E7%89%B9%E6%80%A7%E3%80%82%0A%0Aiperf3%20-c%2010.103.17.184%20-i.5%20-O%202%09%E5%BF%BD%E7%95%A5%E6%8E%89%E5%89%8D2s%E7%9A%84%E6%95%B0%E6%8D%AE%E5%8C%85%EF%BC%8C%E8%AF%A5%E5%91%BD%E4%BB%A4%E7%94%A8%E4%BA%8E%E6%94%AF%E6%8C%81TCP%E7%9A%84%E6%85%A2%E5%90%AF%E5%8A%A8%0Aiperf3%20-Z%20-c%2010.103.17.184%09%E9%80%9A%E8%BF%87%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8sendfile()%20%E5%AE%9E%E7%8E%B0%E2%80%9C%E9%9B%B6%E6%8B%B7%E8%B4%9D%E2%80%9D%E6%95%88%E6%9E%9C%E3%80%82%E6%B6%88%E8%80%97%E8%BE%83%E5%B0%91CPU%E3%80%82%0Aiperf3%20-c%2010.103.17.184%20-T%20s1%20%26%20iperf3%20-c%2010.103.17.184%20-T%20s2%09%E9%80%9A%E7%9F%A5%E6%89%A7%E8%A1%8C%E6%B5%8B%E8%AF%95s1%EF%BC%8Cs2%E5%B9%B6%E8%BF%9B%E8%A1%8C%E6%AF%94%E8%BE%83%E3%80%82%0Aiperf3%20-c%2010.103.17.184%20-J%09%E4%BB%A5json%E7%9A%84%E6%A0%BC%E5%BC%8F%E8%BE%93%E5%87%BA%E6%95%B0%E6%8D%AE%0Aiperf3%20-A%204%2C4%20-c%2010.103.17.184%09%E8%AE%BE%E7%BD%AE%E5%8F%91%E9%80%81%E8%80%85%E5%92%8C%E6%8E%A5%E5%8F%97%E8%80%85%E7%9A%84CPU%E7%9A%84%E6%A0%B8%E6%95%B0%EF%BC%88%E4%BB%8E0%E5%BC%80%E5%A7%8B%EF%BC%89%0Aiperf3%20-c%2010.103.17.184%20-A2%2C2%20-T%20%221%22%20%26%20%3B%20iperf3%20-c%2010.103.17.184%20-p%205202%20-A3%2C3%20-T%20%E2%80%9C2%E2%80%9D%20%26%09%E5%9C%A8CPU%E6%A0%B8%E2%80%9C1%E2%80%9D%E5%92%8C%E6%A0%B8%E2%80%9C2%E2%80%9D%E8%BF%9B%E8%A1%8C%E4%B8%A4%E4%B8%AA%E6%B5%8B%E8%AF%95%0A
